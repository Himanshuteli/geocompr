<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Geocomputation with R</title>
  <meta name="description" content="Geocomputation with R">
  <meta name="generator" content="bookdown 0.4 and GitBook 2.6.7">

  <meta property="og:title" content="Geocomputation with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://robinlovelace.net/geocompr" />
  
  
  <meta name="github-repo" content="Robinlovelace/geocompr" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Geocomputation with R" />
  
  
  

<meta name="author" content="Robin Lovelace">
<meta name="author" content="Jakub Nowosad">


<meta name="date" content="2017-06-25">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="spatial-class.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.8/htmlwidgets.js"></script>
<link href="libs/leaflet-0.7.7/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-0.7.7/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<link href="libs/leaflet-label-0.2.2/leaflet.label.css" rel="stylesheet" />
<script src="libs/leaflet-label-0.2.2/leaflet.label.js"></script>
<script src="libs/Proj4Leaflet-0.7.2/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-0.7.2/proj4leaflet.js"></script>
<script src="libs/leaflet-binding-1.1.0/leaflet.js"></script>
<script src="libs/leaflet-providers-1.0.27/leaflet-providers.js"></script>
<script src="libs/leaflet-providers-plugin-1.1.0/leaflet-providers-plugin.js"></script>
<link href="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet" />
<script src="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99618359-1', 'auto');
  ga('send', 'pageview');

</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Geocomputation with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#development"><i class="fa fa-check"></i>Development</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#reproducibility"><i class="fa fa-check"></i>Reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#why-geocomputation-with-r"><i class="fa fa-check"></i><b>1.1</b> Why Geocomputation with R?</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#rs-spatial-ecosystem"><i class="fa fa-check"></i><b>1.2</b> R’s spatial ecosystem</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="spatial-class.html"><a href="spatial-class.html"><i class="fa fa-check"></i><b>2</b> Geographic data in R</a><ul>
<li class="chapter" data-level="" data-path="spatial-class.html"><a href="spatial-class.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="2.1" data-path="spatial-class.html"><a href="spatial-class.html#intro-sf"><i class="fa fa-check"></i><b>2.1</b> An introduction to Simple Features</a><ul>
<li class="chapter" data-level="2.1.1" data-path="spatial-class.html"><a href="spatial-class.html#exercises"><i class="fa fa-check"></i><b>2.1.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="spatial-class.html"><a href="spatial-class.html#why-simple-features"><i class="fa fa-check"></i><b>2.2</b> Why Simple Features?</a></li>
<li class="chapter" data-level="2.3" data-path="spatial-class.html"><a href="spatial-class.html#basic-map"><i class="fa fa-check"></i><b>2.3</b> Basic map making</a><ul>
<li class="chapter" data-level="2.3.1" data-path="spatial-class.html"><a href="spatial-class.html#challenge"><i class="fa fa-check"></i><b>2.3.1</b> Challenge</a></li>
<li class="chapter" data-level="2.3.2" data-path="spatial-class.html"><a href="spatial-class.html#further-work"><i class="fa fa-check"></i><b>2.3.2</b> Further work</a></li>
<li class="chapter" data-level="2.3.3" data-path="spatial-class.html"><a href="spatial-class.html#exercises-1"><i class="fa fa-check"></i><b>2.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="spatial-class.html"><a href="spatial-class.html#sf_classes"><i class="fa fa-check"></i><b>2.4</b> Simple feature classes</a><ul>
<li class="chapter" data-level="2.4.1" data-path="spatial-class.html"><a href="spatial-class.html#geometry"><i class="fa fa-check"></i><b>2.4.1</b> Simple feature geometry types</a></li>
<li class="chapter" data-level="2.4.2" data-path="spatial-class.html"><a href="spatial-class.html#sfg"><i class="fa fa-check"></i><b>2.4.2</b> Simple feature geometry (sfg) objects</a></li>
<li class="chapter" data-level="2.4.3" data-path="spatial-class.html"><a href="spatial-class.html#sfc"><i class="fa fa-check"></i><b>2.4.3</b> Simple feature collections</a></li>
<li class="chapter" data-level="2.4.4" data-path="spatial-class.html"><a href="spatial-class.html#sf"><i class="fa fa-check"></i><b>2.4.4</b> Simple feature objects</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="spatial-class.html"><a href="spatial-class.html#units"><i class="fa fa-check"></i><b>2.5</b> Units</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="attr.html"><a href="attr.html"><i class="fa fa-check"></i><b>3</b> Attribute data operations</a><ul>
<li class="chapter" data-level="" data-path="attr.html"><a href="attr.html#prerequisites-1"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="3.1" data-path="attr.html"><a href="attr.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="attr.html"><a href="attr.html#attribute-subsetting"><i class="fa fa-check"></i><b>3.2</b> Attribute subsetting</a><ul>
<li class="chapter" data-level="3.2.1" data-path="attr.html"><a href="attr.html#exercises-2"><i class="fa fa-check"></i><b>3.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="attr.html"><a href="attr.html#attribute-data-aggregation"><i class="fa fa-check"></i><b>3.3</b> Attribute data aggregation</a><ul>
<li class="chapter" data-level="3.3.1" data-path="attr.html"><a href="attr.html#exercises-3"><i class="fa fa-check"></i><b>3.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="attr.html"><a href="attr.html#attribute-data-joining"><i class="fa fa-check"></i><b>3.4</b> Attribute data joining</a><ul>
<li class="chapter" data-level="3.4.1" data-path="attr.html"><a href="attr.html#left-joins"><i class="fa fa-check"></i><b>3.4.1</b> Left joins</a></li>
<li class="chapter" data-level="3.4.2" data-path="attr.html"><a href="attr.html#right-joins"><i class="fa fa-check"></i><b>3.4.2</b> Right joins</a></li>
<li class="chapter" data-level="3.4.3" data-path="attr.html"><a href="attr.html#inner-joins"><i class="fa fa-check"></i><b>3.4.3</b> Inner joins</a></li>
<li class="chapter" data-level="3.4.4" data-path="attr.html"><a href="attr.html#semi-joins"><i class="fa fa-check"></i><b>3.4.4</b> Semi joins</a></li>
<li class="chapter" data-level="3.4.5" data-path="attr.html"><a href="attr.html#anti-joins"><i class="fa fa-check"></i><b>3.4.5</b> Anti joins</a></li>
<li class="chapter" data-level="3.4.6" data-path="attr.html"><a href="attr.html#full-joins"><i class="fa fa-check"></i><b>3.4.6</b> Full joins</a></li>
<li class="chapter" data-level="3.4.7" data-path="attr.html"><a href="attr.html#exercises-4"><i class="fa fa-check"></i><b>3.4.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="attr.html"><a href="attr.html#attribute-data-creation"><i class="fa fa-check"></i><b>3.5</b> Attribute data creation</a><ul>
<li class="chapter" data-level="3.5.1" data-path="attr.html"><a href="attr.html#exercises-5"><i class="fa fa-check"></i><b>3.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="attr.html"><a href="attr.html#removing-spatial-information"><i class="fa fa-check"></i><b>3.6</b> Removing spatial information</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html"><i class="fa fa-check"></i><b>4</b> Spatial data operations</a><ul>
<li class="chapter" data-level="" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#prerequisites-2"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="4.1" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#spatial-subsetting"><i class="fa fa-check"></i><b>4.2</b> Spatial subsetting</a><ul>
<li class="chapter" data-level="4.2.1" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#topological-relations"><i class="fa fa-check"></i><b>4.2.1</b> Topological relations</a></li>
<li class="chapter" data-level="4.2.2" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#distance-relations"><i class="fa fa-check"></i><b>4.2.2</b> Distance relations</a></li>
<li class="chapter" data-level="4.2.3" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#spatial-clipping"><i class="fa fa-check"></i><b>4.2.3</b> Spatial clipping</a></li>
<li class="chapter" data-level="4.2.4" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#exercises-6"><i class="fa fa-check"></i><b>4.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#spatial-data-aggregation"><i class="fa fa-check"></i><b>4.3</b> Spatial data aggregation</a></li>
<li class="chapter" data-level="4.4" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#spatial-data-joining"><i class="fa fa-check"></i><b>4.4</b> Spatial data joining</a></li>
<li class="chapter" data-level="4.5" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#spatial-data-creation"><i class="fa fa-check"></i><b>4.5</b> Spatial data creation</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="read-write.html"><a href="read-write.html"><i class="fa fa-check"></i><b>5</b> Geographic data I/O</a><ul>
<li class="chapter" data-level="5.1" data-path="read-write.html"><a href="read-write.html#data-input-i"><i class="fa fa-check"></i><b>5.1</b> Data Input (I)</a></li>
<li class="chapter" data-level="5.2" data-path="read-write.html"><a href="read-write.html#data-output-o"><i class="fa fa-check"></i><b>5.2</b> Data output (O)</a></li>
<li class="chapter" data-level="5.3" data-path="read-write.html"><a href="read-write.html#file-formats"><i class="fa fa-check"></i><b>5.3</b> File formats</a></li>
<li class="chapter" data-level="5.4" data-path="read-write.html"><a href="read-write.html#visual-outputs"><i class="fa fa-check"></i><b>5.4</b> Visual outputs</a></li>
<li class="chapter" data-level="5.5" data-path="read-write.html"><a href="read-write.html#exercises-7"><i class="fa fa-check"></i><b>5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>6</b> References</a></li>
<li class="divider"></li>
<li><a href="http://robinlovelace.net/">Robin Lovelace</a></li>
<li><a href="https://nowosad.github.io/">Jakub Nowosad</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Geocomputation with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intro" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>This book exists at the intersection between Geography and R (Figure <a href="intro.html#fig:venn">1.1</a>). Suggested titles were <em>Geography with R</em> and <em>R for GIS</em>, each of which has advantages. The former conveys the message that it’s not just about spatial data: non-spatial attribute data are inevitably interwoven with geometry data, and Geography is about more than where something is on the map. The latter option communicates that this is a book about using R as a <em>Geographic Information System</em> (GIS), to perform spatial operations on <em>geographic data</em> <span class="citation">(Bivand, Pebesma, and Gómez-Rubio <a href="#ref-bivand_applied_2013">2013</a>)</span>. However, the term GIS has some negative connotations <!-- I see what you mean by negative connotations but I had to think immediately of qualitative GIS and critical GIS, i.e., scientists from the humanities criticising GIS technologies. Think of the so-called "GIS crisis", positivism, make-believe objectivity, etc.--> (see Table <a href="intro.html#tab:gdsl">1.1</a>) and fails to communicate one of R’s greatest strengths: its unparalleled ability to seamlessly switch between geographic and non-geographic data processing, modeling and visualization tasks.</p>
<div class="figure" style="text-align: center"><span id="fig:venn"></span>
<img src="figures/venn-1.png" alt="Venn diagram of the intersection between Geography and R." width="576" />
<p class="caption">
Figure 1.1: Venn diagram of the intersection between Geography and R.
</p>
</div>
<p>The title was chosen because this book is about more than routine spatial data processing. What defines geocomputation as a development on previous work is the “creative and experimental use of GIS that it entails” <span class="citation">(Longley et al. <a href="#ref-longley_geocomputation:_1998">1998</a>)</span>. Another advantage of the term is that it conveys the centrality of the concept of algorithms (which can be implemented in R functions) to advanced geographical research. This is captured in the following quote from another seminal book on the subject <span class="citation">(Openshaw and Abrahart <a href="#ref-openshaw_geocomputation_2000">2000</a>)</span>:</p>
<blockquote>
<p>GeoComputation is about using the various different types of geodata and about developing relevant geo-tools within the overall context of a ‘scientific’ approach.</p>
</blockquote>
<p>Thus geocomputation is not just about using existing tools, but creating new ones. R is a <a href="http://adv-r.had.co.nz/Functional-programming.html">functional language</a> <span class="citation">(Wickham <a href="#ref-wickham_advanced_2014">2014</a>)</span>. It has many ‘bridges’ that allow access to a treasure trove of GIS algorithms. <!-- todo - add this reference to end of previous line: --> <!-- (\@ref(gis)). --> It is thus ideal for quickly creating ‘geo-tools’, without needing to master low level languages such as C, FORTRAN and Java.</p>
<p>But geocomputation is not just about the methods and code: it is about doing “practical work that is beneficial or useful” <span class="citation">(Openshaw and Abrahart <a href="#ref-openshaw_geocomputation_2000">2000</a>)</span>. After reading this book you should be able to do more than just <em>understand</em> geocomputational methods or <em>follow</em> the reproducible examples implemented in code chunks in each chapter. This book is about <em>doing</em> geocomputation. This means applying the methods you have learned (and skills you will master) on real-world data to solve pressing problems for social and environmental benefit.</p>
<p>Geocomputation is a relatively young field<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> but algorithms published under the geocomputational banner have influenced the direction of geographical research, as we will see in subsequent chapters. Algorithms are powerful tools that can become highly complex. However, all algorithms are composed of smaller parts. By teaching these foundations we aim to empower you to create your own solutions to geographic data problems. This can feel like breaking free from the metaphorical ‘glass ceiling’ imposed by GUI-based proprietary geographic information systems (see Table <a href="intro.html#tab:gdsl">1.1</a> for a definition of GUI).</p>
<!-- todo: what contributions, which will we use, where in the book? -->
<p>While embracing recent developments in the field, we also wanted to pay respects to the wider field of Geography, and its 2000 year history <span class="citation">(Roller <a href="#ref-roller_eratosthenes_2010">2010</a>)</span>, of which geocomputation is a part. Geography has played an important role in explaining and influencing humanity’s relationship with the natural world and this book aims to be a part of the ‘Geographic tradition’. Geocomputation in this book therefore means more than simply analyzing geographic data on a computer. It’s about trying to make research which involves making geographic data more reproducible, scientific and socially beneficial. This book is also part of the movement towards Geographic Data Science (GDS) which differs from GIS in several ways, some of which are outlined in Table <a href="intro.html#tab:gdsl">1.1</a>. Inspired by the emphasis of GDS research on reproducible research, this book aims to teach how to do geocomputation rather than just think about it.</p>
<table>
<caption><span id="tab:gdsl">Table 1.1: </span>Differences in emphasis between the fields of Geographic Information Systems (GIS) and Geographic Data Science (GDS).</caption>
<thead>
<tr class="header">
<th align="left">Attribute</th>
<th align="left">GIS</th>
<th align="left">GDS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Home disciplines</td>
<td align="left">Geography</td>
<td align="left">Geography, Computing, Statistics</td>
</tr>
<tr class="even">
<td align="left">Software focus</td>
<td align="left">Graphical User Interface</td>
<td align="left">Code</td>
</tr>
<tr class="odd">
<td align="left">Reproduciblility</td>
<td align="left">Minimal</td>
<td align="left">Maximal</td>
</tr>
</tbody>
</table>
<div id="why-geocomputation-with-r" class="section level2">
<h2><span class="header-section-number">1.1</span> Why Geocomputation with R?</h2>
<p>In this book we treat R as a ‘tool for the trade’. Early geographers used a variety of tools including rulers, compasses and sextants to advance knowledge about the world. <!--nowadays part--> It is important to remember that while R is a powerful tool, especially when interfaced with other software such as <a href="http://www.gdal.org/">GDAL</a> and <a href="http://postgis.net/">PostGIS</a>, other tools may be better for certain tasks. <!-- What exactly do you mean? Which tasks? Is there a geocomputational task for which we do not have an interface? So maybe rephrase along the lines that R is not a GIS and therefore not suited for some geoprocessing tasks but that interfaces close this gap. --></p>
<p>R is characterized by its flexibility, enabling geographical software developers to extend it in multiple ways. A good example of this is support for generating interactive maps thanks to <strong>leaflet</strong> <span class="citation">(Cheng, Karambelkar, and Xie <a href="#ref-R-leaflet">2017</a>)</span>, which has been subsequently built-on by <strong>tmap</strong> and <strong>mapview</strong> <span class="citation">(Tennekes <a href="#ref-R-tmap">2017</a>; Appelhans et al. <a href="#ref-R-mapview">2017</a>)</span>. These packages help overcome the criticism that R has “limited interactive [plotting] facilities” <span class="citation">(Bivand, Pebesma, and Gómez-Rubio <a href="#ref-bivand_applied_2013">2013</a>)</span>. This is no longer true, as illustrated by the code below which generates Figure <a href="intro.html#fig:interactive">1.2</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(leaflet)
popup =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Robin&quot;</span>, <span class="st">&quot;Jakub&quot;</span>)
<span class="kw">leaflet</span>() %&gt;%
<span class="st">  </span><span class="kw">addProviderTiles</span>(<span class="st">&quot;NASAGIBS.ViirsEarthAtNight2012&quot;</span>) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">addAwesomeMarkers</span>(<span class="dt">lng =</span> <span class="kw">c</span>(-<span class="dv">3</span>, <span class="dv">23</span>), <span class="dt">lat =</span> <span class="kw">c</span>(<span class="dv">52</span>, <span class="dv">53</span>), <span class="dt">popup =</span> popup)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:interactive"></span>
<div id="htmlwidget-ec897849c5c50a6f7846" style="width:576px;height:355.968px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-ec897849c5c50a6f7846">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["NASAGIBS.ViirsEarthAtNight2012",null,null,{"errorTileUrl":"","noWrap":false,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false}]},{"method":"addAwesomeMarkers","args":[[52,53],[-3,23],null,null,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["Robin","Jakub"],null,null,null,null,null,null]}],"limits":{"lat":[52,53],"lng":[-3,23]}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 1.2: World at night imagery from NASA overlaid by the authors’ approximate home locations to illustrate interactive mapping with R.
</p>
</div>
<p>It would be difficult to produce Figure <a href="intro.html#fig:interactive">1.2</a> with only 4 lines of code in another language, let alone embed the results in an interactive html page (the interactive version can be viewed at <a href="http://robinlovelace.net/geocompr/intro.html">robinlovelace.net/geocompr</a>), illustrating R’s flexibility.</p>
<!-- Other reasons for using R for geocompuation include: -->
<p>R provides a stable language that should behave consistently across multiple computers, free of charge. The use of R code therefore enables teaching geocomputation with reference to reproducible examples such as that provided in <a href="intro.html#fig:interactive">1.2</a> rather than abstract concepts. But before cracking-on with the action, a few introductory remarks are needed to explain the approach taken here and provide context.</p>
</div>
<div id="rs-spatial-ecosystem" class="section level2">
<h2><span class="header-section-number">1.2</span> R’s spatial ecosystem</h2>
<!-- paragraphs (with references to chapters in the book): -->
<!-- 1. this book focus -> sf + raster/stars + leaflet/mapview (the recent state of spatial R); the history of R spatial is way longer -->
<p>This book teaches Geocomputational techniques using an ecosystem of R packages that in many ways supersede their predecessors in terms of speed and performance. This evolution is common in open source software: because all the code is open, developers can learn from the experiences of prior work, ‘standing on the shoulders of giants’, as Isaac Newton put it in <a href="http://digitallibrary.hsp.org/index.php/Detail/Object/Show/object_id/9285">1676</a>, rather than constantly reinventing the wheel. In the context of spatial vector data classes in R, this can be clearly seen in the evolution of the <strong>sf</strong> package which in many ways evolved from the earlier <strong>sp</strong> package.</p>
<p>R’s evolving spatial ecosystem should also be understood in the context of developments in the wider R community. Since the release of visualisation package <strong>ggplot2</strong> in <a href="https://cran.r-project.org/src/contrib/Archive/ggplot2/">2007</a> and data processing package <strong>dplyr</strong> in <a href="https://cran.r-project.org/src/contrib/Archive/dplyr/">2014</a>, these packages have become extremely popular. These and related packages share a common style, with a focus on ‘tidy data’. For ease of installation and to harmonize packages in this style, the <strong>tidyverse</strong> ‘metapackage’ was released in late <a href="https://cran.r-project.org/src/contrib/Archive/tidyverse/">2016</a>. Although there is no equivalent <strong>sfverse</strong>, there are a growing number of actively developed package which use <strong>sf</strong> (Table <a href="intro.html#tab:revdep">1.2</a>) and discussion of harmonization among R’s many spatial packages.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p>
<table>
<caption><span id="tab:revdep">Table 1.2: </span>The top 5 most downloaded packages that depend on sf, in terms of average number of downloads per day over the previous month. As of 2017-06-23 there are 15 packages which import sf.</caption>
<thead>
<tr class="header">
<th align="left">package</th>
<th align="right">Downloads</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">plotly</td>
<td align="right">1908</td>
</tr>
<tr class="even">
<td align="left">leaflet</td>
<td align="right">535</td>
</tr>
<tr class="odd">
<td align="left">mapview</td>
<td align="right">163</td>
</tr>
<tr class="even">
<td align="left">geojsonio</td>
<td align="right">141</td>
</tr>
<tr class="odd">
<td align="left">tigris</td>
<td align="right">121</td>
</tr>
</tbody>
</table>
<p>Despite the rapid growth of the ‘sfverse’, A surge in development time (and interest) in ‘R-Geo’ has followed the award of a grant by the R Consortium for the development of support for Simple Features and the resulting <strong>sf</strong> package (covered in <a href="spatial-class.html#intro-sf">2.1</a>). Simple Features represent a new way of doing spatial data in R that has many advantages. An emerging sub-system within the wider <strong>sf</strong> has only been around for a short time compared with the incumbent <strong>sp</strong> package, but has already received much attention. Table <a href="#table:cloc"><strong>??</strong></a> compares the two package, illustrating the rapid growth of <strong>sf</strong>. The point of this table is clear: the new paradigm for spatial data analysis heralded by <strong>sf</strong> has the wind in its sails and is set to dominate future developments in R’s spatial ecosystem for years to come.</p>
<div class="figure" style="text-align: center"><span id="fig:cranlogs"></span>
<img src="figures/spatial-package-growth.png" alt="The popularity of spatial packages in R. The y axis shows the average number of downloads, within a 30 day rolling window, of R's top 5 spatial packages, defined as those with the highest number of downloads within the last 30 days." width="1050" />
<p class="caption">
Figure 1.3: The popularity of spatial packages in R. The y axis shows the average number of downloads, within a 30 day rolling window, of R’s top 5 spatial packages, defined as those with the highest number of downloads within the last 30 days.
</p>
</div>
<p>This book focuses on the ‘new’ way of doing geocomputation for practical purposes and to ensure that what you learn here is ‘future-proof’. There is one caveat to this, however: younger packages are generally less stable and may undergo changes to the way they function or (more commonly) add more features. In other words:</p>
<blockquote>
<p>If you live on the cutting edge you risk getting hurt.</p>
</blockquote>
<p>It is therefor worth being aware of the history of the development of spatial data functionality in R. This not only because the incumbent packages are highly mature: there is a wealth of functions, use-cases and teaching material written using older packages in R’s spatial ecosystem, so it’s worth being aware of the history preceding the rise of <strong>sf</strong> depicted in Figure <a href="intro.html#fig:cranlogs">1.3</a>.</p>
<!-- We would like to give you the ability to use the **sf**,<!--raster/stars,-->
<p><strong>tmap</strong>, <strong>leaflet</strong> and <strong>mapview</strong> packages to solve spatial problems. –&gt; <!-- However, spatial analysis in R has a long history. --></p>
<!-- 2. R spatial story (from spatstat, by maptools, sp, raster, leaflet, to sf) -->
<p>In the volume 1/2 of R News (the predecessor of The R Journal), Brian Ripley created an overview of the spatial statistics state in June 2001 <span class="citation">(Ripley <a href="#ref-ripley_spatial_2001">2001</a>)</span>. <!-- https://pdfs.semanticscholar.org/9a0a/40ac215bfc0d52605b487f66928caf6abc99.pdf --> He shortly described eight packages, mostly used for spatial smoothing end interpolation (such as <strong>akima</strong>, <strong>spatial</strong>, <strong>sgeostat</strong> and <strong>geoR</strong>) and spatial point patterns (<strong>splancs</strong> and <strong>spatstat</strong>). Most of these packages where based on the previous code written for S or S-PLUS. <!-- one/two sentences about the spatstat package --> In the next issue of R News, Roger Bivand gave an introduction to the <strong>splanc</strong> package and suggested some future prospects <span class="citation">(Bivand <a href="#ref-bivand_more_2001">2001</a>)</span>.<!-- https://cran.r-project.org/doc/Rnews/Rnews_2001-3.pdf --> The most notably, he mentioned the need for standardized R spatial interface, more efficient mechanisms for exchanging data with GIS, and better ways to treat spatial metadata (such as spatial projections). <!-- It was extended by the paper ... --> <!-- spdep and Opportunities for advancing spatial data analysis in R --> <!-- spdep --> <!-- opportunities; mapping capabilities --> <!-- https://pdfs.semanticscholar.org/9bb5/c9571d64bd3e1ae376967b6c6aca39d6fa70.pdf --> <!-- http://onlinelibrary.wiley.com/doi/10.1111/j.0016-7363.2005.00672.x/full --></p>
<!-- 2. R spatial story (from spatstat, by maptools, sp, raster, leaflet, to sf) -->
<!-- https://pdfs.semanticscholar.org/9bb5/c9571d64bd3e1ae376967b6c6aca39d6fa70.pdf -->
<!-- ASDAR - p. VIII - the Distributed Statistical Computing conference in Vienna in 2003 -->
<!-- ASDAR - p. 3 - For over 10 years, R has had an increasing number of contributed packages for handling and analysing spatial data. All these packages used to make diﬀer- ent assumptions about how spatial data were organised, and R itself had no capabilities for distinguishing coordinates from other numbers. In addition, methods for plotting spatial data and other tasks were scattered, made diﬀer- ent assumptions on the organisation of the data, and were rudimentary. This was not unlike the situation for time series data at the time. -->
<!-- the creation of the sp package - sp_0.7-3.tar.gz   2005-04-28 08:20    459K    (CRAN archive) -->
<!-- the sp package - spatial structures, objects summary, plots (classes and methods) -->
<!-- ASDAR - p. 5 - figure -->
<!-- spatstat_1.0-1.tar.gz  2002-01-21 08:56    674K    (CRAN archive) -->
<!-- R - an interface to libraries gdal (C/C++), proj (C), geos (C++) -->
<!-- R - an interface to visualisation libraries - mostly java script - leaflet->mapview -->
<!-- R also as an interface to GIS software GRASS GIS, SAGA, QGIS, ArcGIS (calls from R and from the software) reference to the CLI/GUI integration chapter -->
<!-- 3. short S story - an interface to Fortran and C -> nowodays R is an interface to many programming languages C, Fortran, C++, JavaScript, Go; -->
<!-- Nowadays xx spatial packages in R -->
<p>The most important recent evolution in R’s spatial ecosystem has without doubt been support for simple features thanks to the <strong>sf</strong> package <span class="citation">(E. Pebesma <a href="#ref-R-sf">2017</a>)</span>, described in Chapter <a href="spatial-class.html#spatial-class">2</a>.</p>
<!-- 
- r, rstudio, gdal, proj4, geos, udunits 
- r packages sf, raster, etc.
- datasets 
-->
<!-- ## Introduction to GIS -->
<!-- 
- what's R
- what's GIS
- GIS data models (vector vs raster)
- coordinate reference system - CRS
- GIS data formats
- GDAL, GEOS, PROJ4
- GIS R package
- GIS beyond R 
-->

</div>
</div>
<h3> References</h3>
<div id="refs" class="references">
<div id="ref-bivand_applied_2013">
<p>Bivand, Roger, Edzer J Pebesma, and Virgilio Gómez-Rubio. 2013. <em>Applied Spatial Data Analysis with R</em>. Vol. 747248717. Springer.</p>
</div>
<div id="ref-longley_geocomputation:_1998">
<p>Longley, Paul A., Sue M. Brooks, Rachael McDonnell, and Bill MacMillan, eds. 1998. <em>Geocomputation: A Primer</em>. 1 edition. Chichester, Eng. ; New York: Wiley.</p>
</div>
<div id="ref-openshaw_geocomputation_2000">
<p>Openshaw, Stan, and Robert J. Abrahart, eds. 2000. <em>Geocomputation</em>. 1 edition. London ; New York: CRC Press.</p>
</div>
<div id="ref-wickham_advanced_2014">
<p>Wickham, Hadley. 2014. <em>Advanced R</em>. CRC Press. <a href="http://www.crcpress.com/product/isbn/9781466586963 http://adv-r.had.co.nz http://www.crcpress.com/product/isbn/9781466586963 http://adv-r.had.co.nz" class="uri">http://www.crcpress.com/product/isbn/9781466586963 http://adv-r.had.co.nz http://www.crcpress.com/product/isbn/9781466586963 http://adv-r.had.co.nz</a>.</p>
</div>
<div id="ref-roller_eratosthenes_2010">
<p>Roller, D. 2010. <em>Eratosthenes’ “Geography”</em>. Princeton University Press. <a href="http://books.google.co.uk/books?id=8peKyWK_SWsC" class="uri">http://books.google.co.uk/books?id=8peKyWK_SWsC</a>.</p>
</div>
<div id="ref-R-leaflet">
<p>Cheng, Joe, Bhaskar Karambelkar, and Yihui Xie. 2017. <em>Leaflet: Create Interactive Web Maps with the JavaScript ’Leaflet’ Library</em>. <a href="https://CRAN.R-project.org/package=leaflet" class="uri">https://CRAN.R-project.org/package=leaflet</a>.</p>
</div>
<div id="ref-R-tmap">
<p>Tennekes, Martijn. 2017. <em>Tmap: Thematic Maps</em>. <a href="https://CRAN.R-project.org/package=tmap" class="uri">https://CRAN.R-project.org/package=tmap</a>.</p>
</div>
<div id="ref-R-mapview">
<p>Appelhans, Tim, Florian Detsch, Christoph Reudenbach, and Stefan Woellauer. 2017. <em>Mapview: Interactive Viewing of Spatial Objects in R</em>. <a href="https://CRAN.R-project.org/package=mapview" class="uri">https://CRAN.R-project.org/package=mapview</a>.</p>
</div>
<div id="ref-ripley_spatial_2001">
<p>Ripley, Brian D. 2001. “Spatial Statistics in R.” <em>R News</em> 1 (2): 14–15.</p>
</div>
<div id="ref-bivand_more_2001">
<p>Bivand, Roger. 2001. “More on Spatial Data Analysis.” <em>R News</em> 1 (3): 13–17.</p>
</div>
<div id="ref-R-sf">
<p>Pebesma, Edzer. 2017. <em>Sf: Simple Features for R</em>. <a href="https://github.com/edzer/sfr/" class="uri">https://github.com/edzer/sfr/</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Geocomputation has a ~30 year history dating back to the first <a href="http://www.geocomputation.org/">conference</a> on the subject in 1996 (at the University of Leeds where the concept for this book was dreamt up) which was followed by a flurry of subsequent publications.<a href="intro.html#fnref1">↩</a></p></li>
<li id="fn2"><p>See the <a href="https://github.com/r-spatial/">r-spatial</a> organisation and conversations in the <a href="https://github.com/r-spatial/discuss/issues/11">discussion</a> repo for more on this.<a href="intro.html#fnref2">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="spatial-class.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Robinlovelace/geocompr/edit/master/01-introduction.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
