<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Geocomputation with R</title>
  <meta name="description" content="Forthcoming book on geographical data with R.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Geocomputation with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://robinlovelace.net/geocompr" />
  
  <meta property="og:description" content="Forthcoming book on geographical data with R." />
  <meta name="github-repo" content="Robinlovelace/geocompr" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Geocomputation with R" />
  
  <meta name="twitter:description" content="Forthcoming book on geographical data with R." />
  

<meta name="author" content="Robin Lovelace">
<meta name="author" content="Jakub Nowosad">


<meta name="date" content="2017-08-28">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="spatial-data-operations.html">
<link rel="next" href="references.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.9/htmlwidgets.js"></script>
<link href="libs/leaflet-0.7.7/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-0.7.7/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<link href="libs/leaflet-label-0.2.2/leaflet.label.css" rel="stylesheet" />
<script src="libs/leaflet-label-0.2.2/leaflet.label.js"></script>
<script src="libs/Proj4Leaflet-0.7.2/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-0.7.2/proj4leaflet.js"></script>
<script src="libs/leaflet-binding-1.1.0/leaflet.js"></script>
<script src="libs/leaflet-providers-1.0.27/leaflet-providers.js"></script>
<script src="libs/leaflet-providers-plugin-1.1.0/leaflet-providers-plugin.js"></script>
<link href="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet" />
<script src="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99618359-1', 'auto');
  ga('send', 'pageview');

</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Geocomputation with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#development"><i class="fa fa-check"></i>Development</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#reproducibility"><i class="fa fa-check"></i>Reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#what-is-geocomputation"><i class="fa fa-check"></i><b>1.1</b> What is geocomputation?</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#why-geocomputation-with-r"><i class="fa fa-check"></i><b>1.2</b> Why Geocomputation with R?</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#software-for-geocomputation"><i class="fa fa-check"></i><b>1.3</b> Software for geocomputation</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#rs-spatial-ecosystem"><i class="fa fa-check"></i><b>1.4</b> R’s spatial ecosystem</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#rs-spatial-history"><i class="fa fa-check"></i><b>1.5</b> R’s spatial history</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#exercises"><i class="fa fa-check"></i><b>1.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="spatial-class.html"><a href="spatial-class.html"><i class="fa fa-check"></i><b>2</b> Geographic data in R</a><ul>
<li class="chapter" data-level="" data-path="spatial-class.html"><a href="spatial-class.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="2.1" data-path="spatial-class.html"><a href="spatial-class.html#vector-data"><i class="fa fa-check"></i><b>2.1</b> Vector data</a><ul>
<li class="chapter" data-level="2.1.1" data-path="spatial-class.html"><a href="spatial-class.html#intro-sf"><i class="fa fa-check"></i><b>2.1.1</b> An introduction to simple features</a></li>
<li class="chapter" data-level="2.1.2" data-path="spatial-class.html"><a href="spatial-class.html#why-simple-features"><i class="fa fa-check"></i><b>2.1.2</b> Why Simple Features?</a></li>
<li class="chapter" data-level="2.1.3" data-path="spatial-class.html"><a href="spatial-class.html#basic-map"><i class="fa fa-check"></i><b>2.1.3</b> Basic map making</a></li>
<li class="chapter" data-level="2.1.4" data-path="spatial-class.html"><a href="spatial-class.html#sf_classes"><i class="fa fa-check"></i><b>2.1.4</b> Simple feature classes</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="spatial-class.html"><a href="spatial-class.html#raster-data"><i class="fa fa-check"></i><b>2.2</b> Raster data</a><ul>
<li class="chapter" data-level="2.2.1" data-path="spatial-class.html"><a href="spatial-class.html#an-introduction-to-raster"><i class="fa fa-check"></i><b>2.2.1</b> An introduction to raster</a></li>
<li class="chapter" data-level="2.2.2" data-path="spatial-class.html"><a href="spatial-class.html#basic-map-making"><i class="fa fa-check"></i><b>2.2.2</b> Basic map making</a></li>
<li class="chapter" data-level="2.2.3" data-path="spatial-class.html"><a href="spatial-class.html#raster-classes"><i class="fa fa-check"></i><b>2.2.3</b> Raster classes</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="spatial-class.html"><a href="spatial-class.html#coordinate-reference-systems"><i class="fa fa-check"></i><b>2.3</b> Coordinate Reference Systems</a></li>
<li class="chapter" data-level="2.4" data-path="spatial-class.html"><a href="spatial-class.html#units"><i class="fa fa-check"></i><b>2.4</b> Units</a></li>
<li class="chapter" data-level="2.5" data-path="spatial-class.html"><a href="spatial-class.html#exercises-1"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="attr.html"><a href="attr.html"><i class="fa fa-check"></i><b>3</b> Attribute data operations</a><ul>
<li class="chapter" data-level="" data-path="attr.html"><a href="attr.html#prerequisites-1"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="3.1" data-path="attr.html"><a href="attr.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="attr.html"><a href="attr.html#attribute-subsetting"><i class="fa fa-check"></i><b>3.2</b> Attribute subsetting</a></li>
<li class="chapter" data-level="3.3" data-path="attr.html"><a href="attr.html#attribute-data-aggregation"><i class="fa fa-check"></i><b>3.3</b> Attribute data aggregation</a></li>
<li class="chapter" data-level="3.4" data-path="attr.html"><a href="attr.html#attribute-data-joining"><i class="fa fa-check"></i><b>3.4</b> Attribute data joining</a><ul>
<li class="chapter" data-level="3.4.1" data-path="attr.html"><a href="attr.html#left-joins"><i class="fa fa-check"></i><b>3.4.1</b> Left joins</a></li>
<li class="chapter" data-level="3.4.2" data-path="attr.html"><a href="attr.html#inner-joins"><i class="fa fa-check"></i><b>3.4.2</b> Inner joins</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="attr.html"><a href="attr.html#attribute-data-creation"><i class="fa fa-check"></i><b>3.5</b> Attribute data creation</a></li>
<li class="chapter" data-level="3.6" data-path="attr.html"><a href="attr.html#removing-spatial-information"><i class="fa fa-check"></i><b>3.6</b> Removing spatial information</a></li>
<li class="chapter" data-level="3.7" data-path="attr.html"><a href="attr.html#exercises-2"><i class="fa fa-check"></i><b>3.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html"><i class="fa fa-check"></i><b>4</b> Spatial data operations</a><ul>
<li class="chapter" data-level="" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#prerequisites-2"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="4.1" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#spatial-subsetting"><i class="fa fa-check"></i><b>4.2</b> Spatial subsetting</a><ul>
<li class="chapter" data-level="" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#note"><i class="fa fa-check"></i>Note</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#spatial-data-aggregation"><i class="fa fa-check"></i><b>4.3</b> Spatial data aggregation</a><ul>
<li class="chapter" data-level="4.3.1" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#spatial-congruence-and-areal-interpolation"><i class="fa fa-check"></i><b>4.3.1</b> Spatial congruence and areal interpolation</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#spatial-data-joining"><i class="fa fa-check"></i><b>4.4</b> Spatial data joining</a></li>
<li class="chapter" data-level="4.5" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#spatial-data-creation"><i class="fa fa-check"></i><b>4.5</b> Spatial data creation</a><ul>
<li class="chapter" data-level="4.5.1" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#topological-relations"><i class="fa fa-check"></i><b>4.5.1</b> Topological relations</a></li>
<li class="chapter" data-level="4.5.2" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#distance-relations"><i class="fa fa-check"></i><b>4.5.2</b> Distance relations</a></li>
<li class="chapter" data-level="4.5.3" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#spatial-clipping"><i class="fa fa-check"></i><b>4.5.3</b> Spatial clipping</a></li>
<li class="chapter" data-level="4.5.4" data-path="spatial-data-operations.html"><a href="spatial-data-operations.html#exercises-3"><i class="fa fa-check"></i><b>4.5.4</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="read-write.html"><a href="read-write.html"><i class="fa fa-check"></i><b>5</b> Geographic data I/O</a><ul>
<li class="chapter" data-level="5.1" data-path="read-write.html"><a href="read-write.html#data-input-i"><i class="fa fa-check"></i><b>5.1</b> Data Input (I)</a><ul>
<li class="chapter" data-level="5.1.1" data-path="read-write.html"><a href="read-write.html#vector-data-1"><i class="fa fa-check"></i><b>5.1.1</b> Vector data</a></li>
<li class="chapter" data-level="5.1.2" data-path="read-write.html"><a href="read-write.html#raster-data-1"><i class="fa fa-check"></i><b>5.1.2</b> Raster data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="read-write.html"><a href="read-write.html#data-output-o"><i class="fa fa-check"></i><b>5.2</b> Data output (O)</a><ul>
<li class="chapter" data-level="5.2.1" data-path="read-write.html"><a href="read-write.html#vector-data-2"><i class="fa fa-check"></i><b>5.2.1</b> Vector data</a></li>
<li class="chapter" data-level="5.2.2" data-path="read-write.html"><a href="read-write.html#raster-data-2"><i class="fa fa-check"></i><b>5.2.2</b> Raster data</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="read-write.html"><a href="read-write.html#file-formats"><i class="fa fa-check"></i><b>5.3</b> File formats</a></li>
<li class="chapter" data-level="5.4" data-path="read-write.html"><a href="read-write.html#visual-outputs"><i class="fa fa-check"></i><b>5.4</b> Visual outputs</a></li>
<li class="chapter" data-level="5.5" data-path="read-write.html"><a href="read-write.html#exercises-4"><i class="fa fa-check"></i><b>5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>6</b> References</a></li>
<li class="divider"></li>
<li><a href="http://robinlovelace.net/">Robin Lovelace</a></li>
<li><a href="https://nowosad.github.io/">Jakub Nowosad</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Geocomputation with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="read-write" class="section level1">
<h1><span class="header-section-number">5</span> Geographic data I/O</h1>
<p>The previous chapters provided an overview of spatial data classes in R, with a focus on simple features and raster. This chapter is about getting spatial data onto your computer and then, perhaps after processing it with techniques described in this book, back out to the world. <!-- Not sure if this is the place for the following two sentences... Or if so, some kind of link is missing.--> We include a section (<a href="read-write.html#visual-outputs">5.4</a>) on visualization because outputting data in a human (not just computer) readable format enables non-programmers to benefit from your work. If your aim is to use geocomputation to improve the world, e.g. by encouraging evidence-based policies, this final stage is vital.</p>
<p>I/O is short for “input/output” which means, in plain English, “reading and writing data”. We use the acronym instead of plain English not to confuse you or to make chapter names short, but because that’s the term used in computer science and it is useful to think of data import and export from a computing perspective.<a href="#fn25" class="footnoteRef" id="fnref25"><sup>25</sup></a></p>
<!-- Old intro to this chapter - can we salvage anything from this? -->
<!-- Reading, writing and plotting are 3 of the most important initial stages in geocomputation. -->
<!-- If you cannot load your data, it's not even worth starting. -->
<!-- If you cannot write your processed data, it will make it hard to collaborate with others. -->
<!-- Furthermore, an often-overlooked issue is that if you cannot create visuals of your spatial data, it will be hard to understand. -->
<!-- For this reason this introductory chapter also has a section on basic map making. -->
<div id="data-input-i" class="section level2">
<h2><span class="header-section-number">5.1</span> Data Input (I)</h2>
<p>To efficiently read data into R, it helps to have an understanding of what happens ‘under the hood’. Executing commands such as <code>sf::st_read()</code> (the main function we use for loading vector data, from the <strong>sf</strong> package), <code>raster::raster()</code> (the main function used for loading raster data, from the <strong>raster</strong> package), or <code>readr::read_csv()</code> (which can we used to read spatial data from text files) silently sets off a chain of events that loads objects. “Loading” in this context means loading the data into R or, more precisely, assigning objects to your workspace, stored in RAM accessible from the <code>.GlobalEnv</code> of your current R session. <!-- What is your understanding of workspace? Or what is the difference between workspace and the global environment here?--> <!-- coud add a footnote here mentioning `.GlobalEnv` --></p>
<div id="vector-data-1" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Vector data</h3>
<p>Spatial vector data comes in a wide variety of file formats, and <strong>sf</strong> is able to handle most of them <!-- is that right? --> via its <code>st_read()</code> command. Behind the scenes it uses GDAL, which supports the import of a very wide range of vector data formats<a href="#fn26" class="footnoteRef" id="fnref26"><sup>26</sup></a>. The first argument of <code>st_read()</code> is <code>file</code>, which should be a text string or an object containing a single text string:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(sf)
<span class="co">#&gt; Linking to GEOS 3.5.0, GDAL 2.1.0, proj.4 4.8.0</span>
vector_filepath =<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;shapes/world.gpkg&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;spData&quot;</span>)
world =<span class="st"> </span><span class="kw">st_read</span>(vector_filepath)
<span class="co">#&gt; Reading layer `wrld.gpkg&#39; from data source `/home/travis/R/Library/spData/shapes/world.gpkg&#39; using driver `GPKG&#39;</span>
<span class="co">#&gt; Simple feature collection with 177 features and 10 fields</span>
<span class="co">#&gt; geometry type:  MULTIPOLYGON</span>
<span class="co">#&gt; dimension:      XY</span>
<span class="co">#&gt; bbox:           xmin: -180 ymin: -90 xmax: 180 ymax: 83.64513</span>
<span class="co">#&gt; epsg (SRID):    4326</span>
<span class="co">#&gt; proj4string:    +proj=longlat +datum=WGS84 +no_defs</span></code></pre></div>
<!-- isn't that confusing? -->
<p><strong>Tip</strong>: <code>read_sf()</code> and <code>write_sf()</code> can be used as easy-to-remember alternatives to <code>st_read()</code> and <code>st_write()</code>. Remember they hide information about the data source and overwrite existing data, though.</p>
<p>A major advantage of <strong>sf</strong> is that it is fast. To demonstrate this, we will use a function to compare <code>st_read()</code> with its <strong>sp</strong> equivalent, <code>rgdal::readOGR()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bench_read =<span class="st"> </span>function(file, n) {
  m =<span class="st"> </span><span class="kw">microbenchmark</span>(<span class="dt">times =</span> n,
                     rgdal::<span class="kw">readOGR</span>(vector_filepath),
                     <span class="kw">st_read</span>(vector_filepath)
  )
  <span class="kw">mean</span>(m$time[<span class="dv">1</span>:n]) /<span class="st"> </span><span class="kw">mean</span>(m$time[(n +<span class="st"> </span><span class="dv">1</span>):(n *<span class="st"> </span><span class="dv">2</span>)])
}</code></pre></div>
<p>This function takes as arguments an input file (<code>file</code>) and a number of times to run each command (<code>n</code>) and returns how many times faster <code>st_read()</code> is than <code>readOGR()</code>. Let’s run the benchmark for the <code>world.gpkg</code> file represented by the object <code>vector_filepath</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(microbenchmark)
read_world_gpkg =<span class="st"> </span><span class="kw">bench_read</span>(<span class="dt">file =</span> vector_filepath, <span class="dt">n =</span> <span class="dv">5</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">read_world_gpkg
<span class="co">#&gt; [1] 2.19</span></code></pre></div>
<p>The results demonstrate that <strong>sf</strong> was around 2 times faster than <strong>rgdal</strong> at reading-in the world countries vector. The relative performance of <code>st_read()</code> compared with other functions will vary depending on file format and the nature of the data. To illustrate this point, we performed the same operation on a geojson file and found a greater speed saving:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vector_filepath_gj =<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;shapes/cycle_hire_osm.geojson&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;spData&quot;</span>)
read_lnd_geojson =<span class="st"> </span><span class="kw">bench_read</span>(<span class="dt">file =</span> vector_filepath_gj, <span class="dt">n =</span> <span class="dv">5</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">read_lnd_geojson
<span class="co">#&gt; [1] 3.34</span></code></pre></div>
<p>In this case <strong>sf</strong> was around 3 times faster than <strong>rgdal</strong>.</p>
<p>To find out which data formats <strong>sf</strong> supports, run <code>st_drivers()</code>. Here, we show only the first two drivers:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sf_drivers =<span class="st"> </span><span class="kw">st_drivers</span>()
<span class="kw">head</span>(sf_drivers, <span class="dt">n =</span> <span class="dv">2</span>)
<span class="co">#&gt;          name                  long_name write  copy is_raster is_vector</span>
<span class="co">#&gt; PCIDSK PCIDSK       PCIDSK Database File  TRUE FALSE      TRUE      TRUE</span>
<span class="co">#&gt; netCDF netCDF Network Common Data Format  TRUE  TRUE      TRUE      TRUE</span></code></pre></div>
</div>
<div id="raster-data-1" class="section level3">
<h3><span class="header-section-number">5.1.2</span> Raster data</h3>
<p>Raster data also could exist in many different file formats. <!-- single and multilayered --><a href="#fn27" class="footnoteRef" id="fnref27"><sup>27</sup></a>.</p>
<!-- raster -->
<!-- brick -->
<!-- stack -->
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rgdal::<span class="kw">gdalDrivers</span>()
<span class="co">#&gt;                name</span>
<span class="co">#&gt; 1           AAIGrid</span>
<span class="co">#&gt; 2              ACE2</span>
<span class="co">#&gt; 3              ADRG</span>
<span class="co">#&gt; 4               AIG</span>
<span class="co">#&gt; 5            AirSAR</span>
<span class="co">#&gt; 6               ARG</span>
<span class="co">#&gt; 7               BAG</span>
<span class="co">#&gt; 8            BIGGIF</span>
<span class="co">#&gt; 9               BLX</span>
<span class="co">#&gt; 10              BMP</span>
<span class="co">#&gt; 11              BSB</span>
<span class="co">#&gt; 12               BT</span>
<span class="co">#&gt; 13             CALS</span>
<span class="co">#&gt; 14             CEOS</span>
<span class="co">#&gt; 15            COASP</span>
<span class="co">#&gt; 16            COSAR</span>
<span class="co">#&gt; 17              CPG</span>
<span class="co">#&gt; 18          CTable2</span>
<span class="co">#&gt; 19              CTG</span>
<span class="co">#&gt; 20            DIMAP</span>
<span class="co">#&gt; 21            DIPEx</span>
<span class="co">#&gt; 22             DODS</span>
<span class="co">#&gt; 23             DOQ1</span>
<span class="co">#&gt; 24             DOQ2</span>
<span class="co">#&gt; 25             DTED</span>
<span class="co">#&gt; 26          E00GRID</span>
<span class="co">#&gt; 27          ECRGTOC</span>
<span class="co">#&gt; 28             EHdr</span>
<span class="co">#&gt; 29              EIR</span>
<span class="co">#&gt; 30             ELAS</span>
<span class="co">#&gt; 31             ENVI</span>
<span class="co">#&gt; 32          EPSILON</span>
<span class="co">#&gt; 33              ERS</span>
<span class="co">#&gt; 34             ESAT</span>
<span class="co">#&gt; 35             FAST</span>
<span class="co">#&gt; 36              FIT</span>
<span class="co">#&gt; 37          FujiBAS</span>
<span class="co">#&gt; 38           GenBin</span>
<span class="co">#&gt; 39              GFF</span>
<span class="co">#&gt; 40              GIF</span>
<span class="co">#&gt; 41              GMT</span>
<span class="co">#&gt; 42             GPKG</span>
<span class="co">#&gt; 43   GRASSASCIIGrid</span>
<span class="co">#&gt; 44             GRIB</span>
<span class="co">#&gt; 45            GS7BG</span>
<span class="co">#&gt; 46             GSAG</span>
<span class="co">#&gt; 47             GSBG</span>
<span class="co">#&gt; 48              GSC</span>
<span class="co">#&gt; 49            GTiff</span>
<span class="co">#&gt; 50              GTX</span>
<span class="co">#&gt; 51              GXF</span>
<span class="co">#&gt; 52             HDF4</span>
<span class="co">#&gt; 53        HDF4Image</span>
<span class="co">#&gt; 54             HDF5</span>
<span class="co">#&gt; 55        HDF5Image</span>
<span class="co">#&gt; 56              HF2</span>
<span class="co">#&gt; 57              HFA</span>
<span class="co">#&gt; 58             HTTP</span>
<span class="co">#&gt; 59              IDA</span>
<span class="co">#&gt; 60            ILWIS</span>
<span class="co">#&gt; 61             INGR</span>
<span class="co">#&gt; 62             IRIS</span>
<span class="co">#&gt; 63             ISCE</span>
<span class="co">#&gt; 64            ISIS2</span>
<span class="co">#&gt; 65            ISIS3</span>
<span class="co">#&gt; 66       JAXAPALSAR</span>
<span class="co">#&gt; 67             JDEM</span>
<span class="co">#&gt; 68      JP2OpenJPEG</span>
<span class="co">#&gt; 69             JPEG</span>
<span class="co">#&gt; 70  KMLSUPEROVERLAY</span>
<span class="co">#&gt; 71              KRO</span>
<span class="co">#&gt; 72              L1B</span>
<span class="co">#&gt; 73              LAN</span>
<span class="co">#&gt; 74              LCP</span>
<span class="co">#&gt; 75         Leveller</span>
<span class="co">#&gt; 76           LOSLAS</span>
<span class="co">#&gt; 77              MAP</span>
<span class="co">#&gt; 78          MBTiles</span>
<span class="co">#&gt; 79              MEM</span>
<span class="co">#&gt; 80              MFF</span>
<span class="co">#&gt; 81             MFF2</span>
<span class="co">#&gt; 82              MRF</span>
<span class="co">#&gt; 83             MSGN</span>
<span class="co">#&gt; 84              NDF</span>
<span class="co">#&gt; 85           netCDF</span>
<span class="co">#&gt; 86         NGSGEOID</span>
<span class="co">#&gt; 87             NITF</span>
<span class="co">#&gt; 88             NTv2</span>
<span class="co">#&gt; 89          NWT_GRC</span>
<span class="co">#&gt; 90          NWT_GRD</span>
<span class="co">#&gt; 91             OGDI</span>
<span class="co">#&gt; 92              OZI</span>
<span class="co">#&gt; 93             PAux</span>
<span class="co">#&gt; 94           PCIDSK</span>
<span class="co">#&gt; 95         PCRaster</span>
<span class="co">#&gt; 96              PDF</span>
<span class="co">#&gt; 97              PDS</span>
<span class="co">#&gt; 98         PLMOSAIC</span>
<span class="co">#&gt; 99         PLSCENES</span>
<span class="co">#&gt; 100             PNG</span>
<span class="co">#&gt; 101             PNM</span>
<span class="co">#&gt; 102   PostGISRaster</span>
<span class="co">#&gt; 103               R</span>
<span class="co">#&gt; 104      Rasterlite</span>
<span class="co">#&gt; 105             RIK</span>
<span class="co">#&gt; 106             RMF</span>
<span class="co">#&gt; 107         ROI_PAC</span>
<span class="co">#&gt; 108          RPFTOC</span>
<span class="co">#&gt; 109             RS2</span>
<span class="co">#&gt; 110             RST</span>
<span class="co">#&gt; 111            SAFE</span>
<span class="co">#&gt; 112            SAGA</span>
<span class="co">#&gt; 113        SAR_CEOS</span>
<span class="co">#&gt; 114            SDTS</span>
<span class="co">#&gt; 115       SENTINEL2</span>
<span class="co">#&gt; 116             SGI</span>
<span class="co">#&gt; 117          SNODAS</span>
<span class="co">#&gt; 118             SRP</span>
<span class="co">#&gt; 119         SRTMHGT</span>
<span class="co">#&gt; 120        Terragen</span>
<span class="co">#&gt; 121             TIL</span>
<span class="co">#&gt; 122             TSX</span>
<span class="co">#&gt; 123         USGSDEM</span>
<span class="co">#&gt; 124           VICAR</span>
<span class="co">#&gt; 125             VRT</span>
<span class="co">#&gt; 126             WCS</span>
<span class="co">#&gt; 127            WEBP</span>
<span class="co">#&gt; 128             WMS</span>
<span class="co">#&gt; 129            WMTS</span>
<span class="co">#&gt; 130             XPM</span>
<span class="co">#&gt; 131             XYZ</span>
<span class="co">#&gt; 132            ZMap</span>
<span class="co">#&gt;                                                    long_name create  copy</span>
<span class="co">#&gt; 1                                        Arc/Info ASCII Grid  FALSE  TRUE</span>
<span class="co">#&gt; 2                                                       ACE2  FALSE FALSE</span>
<span class="co">#&gt; 3                              ARC Digitized Raster Graphics   TRUE FALSE</span>
<span class="co">#&gt; 4                                       Arc/Info Binary Grid  FALSE FALSE</span>
<span class="co">#&gt; 5                                  AirSAR Polarimetric Image  FALSE FALSE</span>
<span class="co">#&gt; 6                                  Azavea Raster Grid format  FALSE  TRUE</span>
<span class="co">#&gt; 7                                 Bathymetry Attributed Grid  FALSE FALSE</span>
<span class="co">#&gt; 8                         Graphics Interchange Format (.gif)  FALSE FALSE</span>
<span class="co">#&gt; 9                                       Magellan topo (.blx)  FALSE  TRUE</span>
<span class="co">#&gt; 10                      MS Windows Device Independent Bitmap   TRUE FALSE</span>
<span class="co">#&gt; 11                               Maptech BSB Nautical Charts  FALSE FALSE</span>
<span class="co">#&gt; 12                       VTP .bt (Binary Terrain) 1.3 Format   TRUE FALSE</span>
<span class="co">#&gt; 13                                             CALS (Type 1)  FALSE  TRUE</span>
<span class="co">#&gt; 14                                                CEOS Image  FALSE FALSE</span>
<span class="co">#&gt; 15                           DRDC COASP SAR Processor Raster  FALSE FALSE</span>
<span class="co">#&gt; 16                COSAR Annotated Binary Matrix (TerraSAR-X)  FALSE FALSE</span>
<span class="co">#&gt; 17                                           Convair PolGASP  FALSE FALSE</span>
<span class="co">#&gt; 18                                  CTable2 Datum Grid Shift   TRUE FALSE</span>
<span class="co">#&gt; 19                            USGS LULC Composite Theme Grid  FALSE FALSE</span>
<span class="co">#&gt; 20                                                SPOT DIMAP  FALSE FALSE</span>
<span class="co">#&gt; 21                                                     DIPEx  FALSE FALSE</span>
<span class="co">#&gt; 22                                           DAP 3.x servers  FALSE FALSE</span>
<span class="co">#&gt; 23                                      USGS DOQ (Old Style)  FALSE FALSE</span>
<span class="co">#&gt; 24                                      USGS DOQ (New Style)  FALSE FALSE</span>
<span class="co">#&gt; 25                                     DTED Elevation Raster  FALSE  TRUE</span>
<span class="co">#&gt; 26                                  Arc/Info Export E00 GRID  FALSE FALSE</span>
<span class="co">#&gt; 27                                           ECRG TOC format  FALSE FALSE</span>
<span class="co">#&gt; 28                                        ESRI .hdr Labelled   TRUE  TRUE</span>
<span class="co">#&gt; 29                                         Erdas Imagine Raw  FALSE FALSE</span>
<span class="co">#&gt; 30                                                      ELAS   TRUE FALSE</span>
<span class="co">#&gt; 31                                        ENVI .hdr Labelled   TRUE FALSE</span>
<span class="co">#&gt; 32                                          Epsilon wavelets  FALSE  TRUE</span>
<span class="co">#&gt; 33                                    ERMapper .ers Labelled   TRUE FALSE</span>
<span class="co">#&gt; 34                                      Envisat Image Format  FALSE FALSE</span>
<span class="co">#&gt; 35                                         EOSAT FAST Format  FALSE FALSE</span>
<span class="co">#&gt; 36                                                 FIT Image  FALSE  TRUE</span>
<span class="co">#&gt; 37                                    Fuji BAS Scanner Image  FALSE FALSE</span>
<span class="co">#&gt; 38                            Generic Binary (.hdr Labelled)  FALSE FALSE</span>
<span class="co">#&gt; 39  Ground-based SAR Applications Testbed File Format (.gff)  FALSE FALSE</span>
<span class="co">#&gt; 40                        Graphics Interchange Format (.gif)  FALSE  TRUE</span>
<span class="co">#&gt; 41                                    GMT NetCDF Grid Format  FALSE  TRUE</span>
<span class="co">#&gt; 42                                                GeoPackage   TRUE  TRUE</span>
<span class="co">#&gt; 43                                          GRASS ASCII Grid  FALSE FALSE</span>
<span class="co">#&gt; 44                                     GRIdded Binary (.grb)  FALSE FALSE</span>
<span class="co">#&gt; 45                      Golden Software 7 Binary Grid (.grd)   TRUE  TRUE</span>
<span class="co">#&gt; 46                         Golden Software ASCII Grid (.grd)  FALSE  TRUE</span>
<span class="co">#&gt; 47                        Golden Software Binary Grid (.grd)   TRUE  TRUE</span>
<span class="co">#&gt; 48                                               GSC Geogrid  FALSE FALSE</span>
<span class="co">#&gt; 49                                                   GeoTIFF   TRUE  TRUE</span>
<span class="co">#&gt; 50                                  NOAA Vertical Datum .GTX   TRUE FALSE</span>
<span class="co">#&gt; 51                              GeoSoft Grid Exchange Format  FALSE FALSE</span>
<span class="co">#&gt; 52                        Hierarchical Data Format Release 4  FALSE FALSE</span>
<span class="co">#&gt; 53                                              HDF4 Dataset   TRUE FALSE</span>
<span class="co">#&gt; 54                        Hierarchical Data Format Release 5  FALSE FALSE</span>
<span class="co">#&gt; 55                                              HDF5 Dataset  FALSE FALSE</span>
<span class="co">#&gt; 56                                HF2/HFZ heightfield raster  FALSE  TRUE</span>
<span class="co">#&gt; 57                               Erdas Imagine Images (.img)   TRUE  TRUE</span>
<span class="co">#&gt; 58                                     HTTP Fetching Wrapper  FALSE FALSE</span>
<span class="co">#&gt; 59                                   Image Data and Analysis   TRUE FALSE</span>
<span class="co">#&gt; 60                                          ILWIS Raster Map   TRUE  TRUE</span>
<span class="co">#&gt; 61                                         Intergraph Raster   TRUE  TRUE</span>
<span class="co">#&gt; 62                              IRIS data (.PPI, .CAPPi etc)  FALSE FALSE</span>
<span class="co">#&gt; 63                                               ISCE raster   TRUE FALSE</span>
<span class="co">#&gt; 64                   USGS Astrogeology ISIS cube (Version 2)   TRUE FALSE</span>
<span class="co">#&gt; 65                   USGS Astrogeology ISIS cube (Version 3)  FALSE FALSE</span>
<span class="co">#&gt; 66                JAXA PALSAR Product Reader (Level 1.1/1.5)  FALSE FALSE</span>
<span class="co">#&gt; 67                                       Japanese DEM (.mem)  FALSE FALSE</span>
<span class="co">#&gt; 68                JPEG-2000 driver based on OpenJPEG library  FALSE  TRUE</span>
<span class="co">#&gt; 69                                                 JPEG JFIF  FALSE  TRUE</span>
<span class="co">#&gt; 70                                         Kml Super Overlay  FALSE  TRUE</span>
<span class="co">#&gt; 71                                                 KOLOR Raw   TRUE FALSE</span>
<span class="co">#&gt; 72                      NOAA Polar Orbiter Level 1b Data Set  FALSE FALSE</span>
<span class="co">#&gt; 73                                           Erdas .LAN/.GIS   TRUE FALSE</span>
<span class="co">#&gt; 74                         FARSITE v.4 Landscape File (.lcp)  FALSE  TRUE</span>
<span class="co">#&gt; 75                                      Leveller heightfield   TRUE FALSE</span>
<span class="co">#&gt; 76                         NADCON .los/.las Datum Grid Shift  FALSE FALSE</span>
<span class="co">#&gt; 77                                          OziExplorer .MAP  FALSE FALSE</span>
<span class="co">#&gt; 78                                                   MBTiles   TRUE  TRUE</span>
<span class="co">#&gt; 79                                          In Memory Raster   TRUE FALSE</span>
<span class="co">#&gt; 80                                         Vexcel MFF Raster   TRUE  TRUE</span>
<span class="co">#&gt; 81                                  Vexcel MFF2 (HKV) Raster   TRUE  TRUE</span>
<span class="co">#&gt; 82                                        Meta Raster Format   TRUE  TRUE</span>
<span class="co">#&gt; 83                            EUMETSAT Archive native (.nat)  FALSE FALSE</span>
<span class="co">#&gt; 84                                         NLAPS Data Format  FALSE FALSE</span>
<span class="co">#&gt; 85                                Network Common Data Format   TRUE  TRUE</span>
<span class="co">#&gt; 86                               NOAA NGS Geoid Height Grids  FALSE FALSE</span>
<span class="co">#&gt; 87                      National Imagery Transmission Format   TRUE  TRUE</span>
<span class="co">#&gt; 88                                     NTv2 Datum Grid Shift   TRUE FALSE</span>
<span class="co">#&gt; 89                Northwood Classified Grid Format .grc/.tab  FALSE FALSE</span>
<span class="co">#&gt; 90                   Northwood Numeric Grid Format .grd/.tab  FALSE FALSE</span>
<span class="co">#&gt; 91                                               OGDI Bridge  FALSE FALSE</span>
<span class="co">#&gt; 92                                    OziExplorer Image File  FALSE FALSE</span>
<span class="co">#&gt; 93                                         PCI .aux Labelled   TRUE FALSE</span>
<span class="co">#&gt; 94                                      PCIDSK Database File   TRUE FALSE</span>
<span class="co">#&gt; 95                                      PCRaster Raster File   TRUE  TRUE</span>
<span class="co">#&gt; 96                                            Geospatial PDF   TRUE  TRUE</span>
<span class="co">#&gt; 97                                NASA Planetary Data System  FALSE FALSE</span>
<span class="co">#&gt; 98                                   Planet Labs Mosaics API  FALSE FALSE</span>
<span class="co">#&gt; 99                                    Planet Labs Scenes API  FALSE FALSE</span>
<span class="co">#&gt; 100                                Portable Network Graphics  FALSE  TRUE</span>
<span class="co">#&gt; 101                          Portable Pixmap Format (netpbm)   TRUE FALSE</span>
<span class="co">#&gt; 102                                    PostGIS Raster driver  FALSE  TRUE</span>
<span class="co">#&gt; 103                                      R Object Data Store  FALSE  TRUE</span>
<span class="co">#&gt; 104                                               Rasterlite  FALSE  TRUE</span>
<span class="co">#&gt; 105                                  Swedish Grid RIK (.rik)  FALSE FALSE</span>
<span class="co">#&gt; 106                                     Raster Matrix Format   TRUE FALSE</span>
<span class="co">#&gt; 107                                           ROI_PAC raster   TRUE FALSE</span>
<span class="co">#&gt; 108                         Raster Product Format TOC format  FALSE FALSE</span>
<span class="co">#&gt; 109                                   RadarSat 2 XML Product  FALSE FALSE</span>
<span class="co">#&gt; 110                                        Idrisi Raster A.1   TRUE  TRUE</span>
<span class="co">#&gt; 111                              Sentinel-1 SAR SAFE Product  FALSE FALSE</span>
<span class="co">#&gt; 112                             SAGA GIS Binary Grid (.sdat)   TRUE  TRUE</span>
<span class="co">#&gt; 113                                           CEOS SAR Image  FALSE FALSE</span>
<span class="co">#&gt; 114                                              SDTS Raster  FALSE FALSE</span>
<span class="co">#&gt; 115                                               Sentinel 2  FALSE FALSE</span>
<span class="co">#&gt; 116                                SGI Image File Format 1.0   TRUE FALSE</span>
<span class="co">#&gt; 117                            Snow Data Assimilation System  FALSE FALSE</span>
<span class="co">#&gt; 118                      Standard Raster Product (ASRP/USRP)  FALSE FALSE</span>
<span class="co">#&gt; 119                                      SRTMHGT File Format  FALSE  TRUE</span>
<span class="co">#&gt; 120                                     Terragen heightfield   TRUE FALSE</span>
<span class="co">#&gt; 121                                          EarthWatch .TIL  FALSE FALSE</span>
<span class="co">#&gt; 122                                       TerraSAR-X Product  FALSE FALSE</span>
<span class="co">#&gt; 123                       USGS Optional ASCII DEM (and CDED)  FALSE  TRUE</span>
<span class="co">#&gt; 124                                          MIPL VICAR file  FALSE FALSE</span>
<span class="co">#&gt; 125                                           Virtual Raster   TRUE  TRUE</span>
<span class="co">#&gt; 126                                 OGC Web Coverage Service  FALSE FALSE</span>
<span class="co">#&gt; 127                                                     WEBP  FALSE  TRUE</span>
<span class="co">#&gt; 128                                      OGC Web Map Service  FALSE  TRUE</span>
<span class="co">#&gt; 129                                 OGC Web Mab Tile Service  FALSE  TRUE</span>
<span class="co">#&gt; 130                                        X11 PixMap Format  FALSE  TRUE</span>
<span class="co">#&gt; 131                                        ASCII Gridded XYZ  FALSE  TRUE</span>
<span class="co">#&gt; 132                                           ZMap Plus Grid  FALSE  TRUE</span>
<span class="co">#&gt;     isRaster</span>
<span class="co">#&gt; 1       TRUE</span>
<span class="co">#&gt; 2       TRUE</span>
<span class="co">#&gt; 3       TRUE</span>
<span class="co">#&gt; 4       TRUE</span>
<span class="co">#&gt; 5       TRUE</span>
<span class="co">#&gt; 6       TRUE</span>
<span class="co">#&gt; 7       TRUE</span>
<span class="co">#&gt; 8       TRUE</span>
<span class="co">#&gt; 9       TRUE</span>
<span class="co">#&gt; 10      TRUE</span>
<span class="co">#&gt; 11      TRUE</span>
<span class="co">#&gt; 12      TRUE</span>
<span class="co">#&gt; 13      TRUE</span>
<span class="co">#&gt; 14      TRUE</span>
<span class="co">#&gt; 15      TRUE</span>
<span class="co">#&gt; 16      TRUE</span>
<span class="co">#&gt; 17      TRUE</span>
<span class="co">#&gt; 18      TRUE</span>
<span class="co">#&gt; 19      TRUE</span>
<span class="co">#&gt; 20      TRUE</span>
<span class="co">#&gt; 21      TRUE</span>
<span class="co">#&gt; 22      TRUE</span>
<span class="co">#&gt; 23      TRUE</span>
<span class="co">#&gt; 24      TRUE</span>
<span class="co">#&gt; 25      TRUE</span>
<span class="co">#&gt; 26      TRUE</span>
<span class="co">#&gt; 27      TRUE</span>
<span class="co">#&gt; 28      TRUE</span>
<span class="co">#&gt; 29      TRUE</span>
<span class="co">#&gt; 30      TRUE</span>
<span class="co">#&gt; 31      TRUE</span>
<span class="co">#&gt; 32      TRUE</span>
<span class="co">#&gt; 33      TRUE</span>
<span class="co">#&gt; 34      TRUE</span>
<span class="co">#&gt; 35      TRUE</span>
<span class="co">#&gt; 36      TRUE</span>
<span class="co">#&gt; 37      TRUE</span>
<span class="co">#&gt; 38      TRUE</span>
<span class="co">#&gt; 39      TRUE</span>
<span class="co">#&gt; 40      TRUE</span>
<span class="co">#&gt; 41      TRUE</span>
<span class="co">#&gt; 42      TRUE</span>
<span class="co">#&gt; 43      TRUE</span>
<span class="co">#&gt; 44      TRUE</span>
<span class="co">#&gt; 45      TRUE</span>
<span class="co">#&gt; 46      TRUE</span>
<span class="co">#&gt; 47      TRUE</span>
<span class="co">#&gt; 48      TRUE</span>
<span class="co">#&gt; 49      TRUE</span>
<span class="co">#&gt; 50      TRUE</span>
<span class="co">#&gt; 51      TRUE</span>
<span class="co">#&gt; 52      TRUE</span>
<span class="co">#&gt; 53      TRUE</span>
<span class="co">#&gt; 54      TRUE</span>
<span class="co">#&gt; 55      TRUE</span>
<span class="co">#&gt; 56      TRUE</span>
<span class="co">#&gt; 57      TRUE</span>
<span class="co">#&gt; 58      TRUE</span>
<span class="co">#&gt; 59      TRUE</span>
<span class="co">#&gt; 60      TRUE</span>
<span class="co">#&gt; 61      TRUE</span>
<span class="co">#&gt; 62      TRUE</span>
<span class="co">#&gt; 63      TRUE</span>
<span class="co">#&gt; 64      TRUE</span>
<span class="co">#&gt; 65      TRUE</span>
<span class="co">#&gt; 66      TRUE</span>
<span class="co">#&gt; 67      TRUE</span>
<span class="co">#&gt; 68      TRUE</span>
<span class="co">#&gt; 69      TRUE</span>
<span class="co">#&gt; 70      TRUE</span>
<span class="co">#&gt; 71      TRUE</span>
<span class="co">#&gt; 72      TRUE</span>
<span class="co">#&gt; 73      TRUE</span>
<span class="co">#&gt; 74      TRUE</span>
<span class="co">#&gt; 75      TRUE</span>
<span class="co">#&gt; 76      TRUE</span>
<span class="co">#&gt; 77      TRUE</span>
<span class="co">#&gt; 78      TRUE</span>
<span class="co">#&gt; 79      TRUE</span>
<span class="co">#&gt; 80      TRUE</span>
<span class="co">#&gt; 81      TRUE</span>
<span class="co">#&gt; 82      TRUE</span>
<span class="co">#&gt; 83      TRUE</span>
<span class="co">#&gt; 84      TRUE</span>
<span class="co">#&gt; 85      TRUE</span>
<span class="co">#&gt; 86      TRUE</span>
<span class="co">#&gt; 87      TRUE</span>
<span class="co">#&gt; 88      TRUE</span>
<span class="co">#&gt; 89      TRUE</span>
<span class="co">#&gt; 90      TRUE</span>
<span class="co">#&gt; 91      TRUE</span>
<span class="co">#&gt; 92      TRUE</span>
<span class="co">#&gt; 93      TRUE</span>
<span class="co">#&gt; 94      TRUE</span>
<span class="co">#&gt; 95      TRUE</span>
<span class="co">#&gt; 96      TRUE</span>
<span class="co">#&gt; 97      TRUE</span>
<span class="co">#&gt; 98      TRUE</span>
<span class="co">#&gt; 99      TRUE</span>
<span class="co">#&gt; 100     TRUE</span>
<span class="co">#&gt; 101     TRUE</span>
<span class="co">#&gt; 102     TRUE</span>
<span class="co">#&gt; 103     TRUE</span>
<span class="co">#&gt; 104     TRUE</span>
<span class="co">#&gt; 105     TRUE</span>
<span class="co">#&gt; 106     TRUE</span>
<span class="co">#&gt; 107     TRUE</span>
<span class="co">#&gt; 108     TRUE</span>
<span class="co">#&gt; 109     TRUE</span>
<span class="co">#&gt; 110     TRUE</span>
<span class="co">#&gt; 111     TRUE</span>
<span class="co">#&gt; 112     TRUE</span>
<span class="co">#&gt; 113     TRUE</span>
<span class="co">#&gt; 114     TRUE</span>
<span class="co">#&gt; 115     TRUE</span>
<span class="co">#&gt; 116     TRUE</span>
<span class="co">#&gt; 117     TRUE</span>
<span class="co">#&gt; 118     TRUE</span>
<span class="co">#&gt; 119     TRUE</span>
<span class="co">#&gt; 120     TRUE</span>
<span class="co">#&gt; 121     TRUE</span>
<span class="co">#&gt; 122     TRUE</span>
<span class="co">#&gt; 123     TRUE</span>
<span class="co">#&gt; 124     TRUE</span>
<span class="co">#&gt; 125     TRUE</span>
<span class="co">#&gt; 126     TRUE</span>
<span class="co">#&gt; 127     TRUE</span>
<span class="co">#&gt; 128     TRUE</span>
<span class="co">#&gt; 129     TRUE</span>
<span class="co">#&gt; 130     TRUE</span>
<span class="co">#&gt; 131     TRUE</span>
<span class="co">#&gt; 132     TRUE</span></code></pre></div>
<!-- additional save to text subsection? -->
</div>
</div>
<div id="data-output-o" class="section level2">
<h2><span class="header-section-number">5.2</span> Data output (O)</h2>
<!-- raster + vector + text intro -->
<div id="vector-data-2" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Vector data</h3>
<p>The counterpart of <code>st_read()</code> is <code>st_write()</code>. It allows to write <strong>sf</strong> objects to a wide range of geographic vector file formats, including the most common ones such as <code>.geojson</code>, <code>.shp</code> and <code>.gpkg</code>. Based on the file name <code>st_write()</code> decides automatically which driver to use. How fast the writing process is depends also on the driver: <!-- Is this comparison here necessary, or shouldn't we instead focus on the automatic driver selection? --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">system.time</span>(<span class="kw">st_write</span>(world, <span class="st">&quot;world.geojson&quot;</span>, <span class="dt">quiet =</span> <span class="ot">TRUE</span>))
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;    0.08    0.00    0.08</span>
<span class="kw">system.time</span>(<span class="kw">st_write</span>(world, <span class="st">&quot;world.shp&quot;</span>, <span class="dt">quiet =</span> <span class="ot">TRUE</span>)) 
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;   0.040   0.000   0.042</span>
<span class="kw">system.time</span>(<span class="kw">st_write</span>(world, <span class="st">&quot;world.gpkg&quot;</span>, <span class="dt">quiet =</span> <span class="ot">TRUE</span>))
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;   0.028   0.000   0.030</span></code></pre></div>
<!-- ```{r} -->
<!-- st_write(obj = world, dsn = "world.gpkg") -->
<!-- ``` -->
<p><strong>Note</strong>: if you try to write to the same data source again, the function will fail. <!-- Why are you creating a modified version? Could you not use the same object again to demonstrate that overwriting will fail? --> This is demonstrated in the code below for a modified version of the world in which the population doubles in all countries (don’t worry about the <strong>dplyr</strong> code for now, this is covered in Chapter <a href="attr.html#attr">3</a>):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">world_mod =<span class="st"> </span>dplyr::<span class="kw">mutate</span>(world, <span class="dt">pop =</span> pop *<span class="st"> </span><span class="dv">2</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_write</span>(<span class="dt">obj =</span> world_mod, <span class="dt">dsn =</span> <span class="st">&quot;world.gpkg&quot;</span>)
##   GDAL Error 1: Layer world.gpkg already exists, CreateLayer failed.
## Use the layer creation option OVERWRITE=YES to replace it.</code></pre></div>
<p>The error message (only partly reproduced above) provides some information as to why the function failed. The <code>GDAL Error 1</code> statement makes clear that the failure occurred at the GDAL level. Additionally, the suggestion to use <code>OVERWRITE=YES</code> provides a clue how to fix the problem. However, this is a GDAL option, and not a <code>st_write()</code> argument. Luckily, <code>st_write</code> provides a <code>layer_options</code> argument through which we can pass driver-dependent options:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_write</span>(<span class="dt">obj =</span> world_mod, <span class="dt">dsn =</span> <span class="st">&quot;world.gpkg&quot;</span>, <span class="dt">layer_options =</span> <span class="st">&quot;OVERWRITE=YES&quot;</span>)</code></pre></div>
<p>Another solution is to use the <code>st_write()</code> argument <code>delete_layer</code>. Setting it to <code>TRUE</code> deletes already existing layers in the data source before the function attempts to write (note there is also a <code>delete_dsn</code> argument):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_write</span>(<span class="dt">obj =</span> world_mod, <span class="dt">dsn =</span> <span class="st">&quot;world.gpkg&quot;</span>, <span class="dt">delete_layer =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>You can achieve the same with <code>write_sf()</code> since it is equivalent to (technically an <em>alias</em> for) <code>st_write()</code>, except that its defaults for <code>delete_layer</code> and <code>quiet</code> is <code>TRUE</code>. This enables spatial data to be overwritten more concisely, and with less output going to screen: <!-- What does this mean: overwritten more concisely? --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write_sf</span>(<span class="dt">obj =</span> world_mod, <span class="dt">dsn =</span> <span class="st">&quot;world.gpkg&quot;</span>)</code></pre></div>
<!-- Is the file.remove()-part important? -->
<p>A blunter way to update file-based geographic data sources such as <code>.gpkg</code> files is to simply delete them. This is not generally recommended, as it will not work for multi-file data sources such as <code>.shp</code> files:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">file.remove</span>(<span class="st">&quot;world.gpkg&quot;</span>)</code></pre></div>
</div>
<div id="raster-data-2" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Raster data</h3>
<!-- writeRaster -->
<!-- + datatypes -->
<!-- + options (for example geotiff) -->
<!-- + bylayer -->
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">raster::<span class="kw">writeFormats</span>()
<span class="co">#&gt;       name        long_name                                </span>
<span class="co">#&gt;  [1,] &quot;raster&quot;    &quot;R-raster&quot;                               </span>
<span class="co">#&gt;  [2,] &quot;SAGA&quot;      &quot;SAGA GIS&quot;                               </span>
<span class="co">#&gt;  [3,] &quot;IDRISI&quot;    &quot;IDRISI&quot;                                 </span>
<span class="co">#&gt;  [4,] &quot;IDRISIold&quot; &quot;IDRISI (img/doc)&quot;                       </span>
<span class="co">#&gt;  [5,] &quot;BIL&quot;       &quot;Band by Line&quot;                           </span>
<span class="co">#&gt;  [6,] &quot;BSQ&quot;       &quot;Band Sequential&quot;                        </span>
<span class="co">#&gt;  [7,] &quot;BIP&quot;       &quot;Band by Pixel&quot;                          </span>
<span class="co">#&gt;  [8,] &quot;ascii&quot;     &quot;Arc ASCII&quot;                              </span>
<span class="co">#&gt;  [9,] &quot;CDF&quot;       &quot;NetCDF&quot;                                 </span>
<span class="co">#&gt; [10,] &quot;big&quot;       &quot;big.matrix&quot;                             </span>
<span class="co">#&gt; [11,] &quot;ADRG&quot;      &quot;ARC Digitized Raster Graphics&quot;          </span>
<span class="co">#&gt; [12,] &quot;BMP&quot;       &quot;MS Windows Device Independent Bitmap&quot;   </span>
<span class="co">#&gt; [13,] &quot;BT&quot;        &quot;VTP .bt (Binary Terrain) 1.3 Format&quot;    </span>
<span class="co">#&gt; [14,] &quot;CTable2&quot;   &quot;CTable2 Datum Grid Shift&quot;               </span>
<span class="co">#&gt; [15,] &quot;EHdr&quot;      &quot;ESRI .hdr Labelled&quot;                     </span>
<span class="co">#&gt; [16,] &quot;ELAS&quot;      &quot;ELAS&quot;                                   </span>
<span class="co">#&gt; [17,] &quot;ENVI&quot;      &quot;ENVI .hdr Labelled&quot;                     </span>
<span class="co">#&gt; [18,] &quot;ERS&quot;       &quot;ERMapper .ers Labelled&quot;                 </span>
<span class="co">#&gt; [19,] &quot;GPKG&quot;      &quot;GeoPackage&quot;                             </span>
<span class="co">#&gt; [20,] &quot;GS7BG&quot;     &quot;Golden Software 7 Binary Grid (.grd)&quot;   </span>
<span class="co">#&gt; [21,] &quot;GSBG&quot;      &quot;Golden Software Binary Grid (.grd)&quot;     </span>
<span class="co">#&gt; [22,] &quot;GTiff&quot;     &quot;GeoTIFF&quot;                                </span>
<span class="co">#&gt; [23,] &quot;GTX&quot;       &quot;NOAA Vertical Datum .GTX&quot;               </span>
<span class="co">#&gt; [24,] &quot;HDF4Image&quot; &quot;HDF4 Dataset&quot;                           </span>
<span class="co">#&gt; [25,] &quot;HFA&quot;       &quot;Erdas Imagine Images (.img)&quot;            </span>
<span class="co">#&gt; [26,] &quot;IDA&quot;       &quot;Image Data and Analysis&quot;                </span>
<span class="co">#&gt; [27,] &quot;ILWIS&quot;     &quot;ILWIS Raster Map&quot;                       </span>
<span class="co">#&gt; [28,] &quot;INGR&quot;      &quot;Intergraph Raster&quot;                      </span>
<span class="co">#&gt; [29,] &quot;ISCE&quot;      &quot;ISCE raster&quot;                            </span>
<span class="co">#&gt; [30,] &quot;ISIS2&quot;     &quot;USGS Astrogeology ISIS cube (Version 2)&quot;</span>
<span class="co">#&gt; [31,] &quot;KRO&quot;       &quot;KOLOR Raw&quot;                              </span>
<span class="co">#&gt; [32,] &quot;LAN&quot;       &quot;Erdas .LAN/.GIS&quot;                        </span>
<span class="co">#&gt; [33,] &quot;Leveller&quot;  &quot;Leveller heightfield&quot;                   </span>
<span class="co">#&gt; [34,] &quot;MBTiles&quot;   &quot;MBTiles&quot;                                </span>
<span class="co">#&gt; [35,] &quot;MRF&quot;       &quot;Meta Raster Format&quot;                     </span>
<span class="co">#&gt; [36,] &quot;netCDF&quot;    &quot;Network Common Data Format&quot;             </span>
<span class="co">#&gt; [37,] &quot;NITF&quot;      &quot;National Imagery Transmission Format&quot;   </span>
<span class="co">#&gt; [38,] &quot;NTv2&quot;      &quot;NTv2 Datum Grid Shift&quot;                  </span>
<span class="co">#&gt; [39,] &quot;PAux&quot;      &quot;PCI .aux Labelled&quot;                      </span>
<span class="co">#&gt; [40,] &quot;PCIDSK&quot;    &quot;PCIDSK Database File&quot;                   </span>
<span class="co">#&gt; [41,] &quot;PCRaster&quot;  &quot;PCRaster Raster File&quot;                   </span>
<span class="co">#&gt; [42,] &quot;PDF&quot;       &quot;Geospatial PDF&quot;                         </span>
<span class="co">#&gt; [43,] &quot;PNM&quot;       &quot;Portable Pixmap Format (netpbm)&quot;        </span>
<span class="co">#&gt; [44,] &quot;RMF&quot;       &quot;Raster Matrix Format&quot;                   </span>
<span class="co">#&gt; [45,] &quot;ROI_PAC&quot;   &quot;ROI_PAC raster&quot;                         </span>
<span class="co">#&gt; [46,] &quot;RST&quot;       &quot;Idrisi Raster A.1&quot;                      </span>
<span class="co">#&gt; [47,] &quot;SAGA&quot;      &quot;SAGA GIS Binary Grid (.sdat)&quot;           </span>
<span class="co">#&gt; [48,] &quot;SGI&quot;       &quot;SGI Image File Format 1.0&quot;              </span>
<span class="co">#&gt; [49,] &quot;Terragen&quot;  &quot;Terragen heightfield&quot;</span></code></pre></div>
</div>
</div>
<div id="file-formats" class="section level2">
<h2><span class="header-section-number">5.3</span> File formats</h2>
<!-- vector formats -->
<!-- .gpkg + geojson? -->
<!-- don't use shp -->
<!-- Raster formats -->
<!-- geotiff + its metadata -->
<!-- ncdf mention -->
</div>
<div id="visual-outputs" class="section level2">
<h2><span class="header-section-number">5.4</span> Visual outputs</h2>
</div>
<div id="exercises-4" class="section level2">
<h2><span class="header-section-number">5.5</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Name three differences between <code>write_sf()</code> and the more well-known function <code>st_write()</code>.</p></li>
<li><p>What are the default arguments of <code>read_sf()</code> and <code>write_sf()</code> that enable two of these differences?</p></li>
</ol>
<!-- ## Vector -->
<!-- 
- sf package 
- st_drivers
- st_read, read_sf
- st_write, write_sf
- text files 
- WKT, WKB, sp (st_as_sf)
-->
<!-- ## Raster -->
<!-- 
- raster package 
- raster
-->

</div>
</div>
<div class="footnotes">
<hr />
<ol start="25">
<li id="fn25"><p>Concepts such as computational efficiency, hard disk space and ‘idempotence’ are useful when thinking about reading and writing geographic datasets, which can become large and difficult to handle. Loading/saving data is yet another way of saying the same thing.<a href="read-write.html#fnref25">↩</a></p></li>
<li id="fn26"><p>A list of supported formats could be found using <code>sf::st_drivers()</code><a href="read-write.html#fnref26">↩</a></p></li>
<li id="fn27"><p>A list of supported raster formats could be found using <code>rgdal::gdalDrivers()</code><a href="read-write.html#fnref27">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="spatial-data-operations.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Robinlovelace/geocompr/edit/master/05-read-write-plot.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
